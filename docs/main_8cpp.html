<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Weather Station v3: main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Weather Station v3
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
   <div id="projectbrief">Latest version of the WeatherStation project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('main_8cpp.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">main.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main file of the Weather Station v3 project.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;cstring&gt;</code><br />
<code>#include &lt;libusb-1.0/libusb.h&gt;</code><br />
<code>#include &quot;<a class="el" href="data__decoder_8h_source.html">data_decoder.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
<code>#include &quot;network_utils.hpp&quot;</code><br />
<code>#include &quot;<a class="el" href="_observation_8h_source.html">Observation.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="memdesc:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function from where the different calls to the modules are done and coordinated to obtain the data, process it, and send it to the outside.  <a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">More...</a><br /></td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bffa26657f61f8155f2ebf41a1e434d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a3bffa26657f61f8155f2ebf41a1e434d">printdev</a> (libusb_device *dev)</td></tr>
<tr class="memdesc:a3bffa26657f61f8155f2ebf41a1e434d"><td class="mdescLeft">&#160;</td><td class="mdescRight">From a USB device, it shows its information.  <a href="#a3bffa26657f61f8155f2ebf41a1e434d">More...</a><br /></td></tr>
<tr class="separator:a3bffa26657f61f8155f2ebf41a1e434d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15a306be596b033fc21141b52118537d"><td class="memItemLeft" align="right" valign="top">short int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a15a306be596b033fc21141b52118537d">obtain_usb_data</a> (unsigned char *receive_buffer)</td></tr>
<tr class="memdesc:a15a306be596b033fc21141b52118537d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to obtain the info from the USB device.  <a href="#a15a306be596b033fc21141b52118537d">More...</a><br /></td></tr>
<tr class="separator:a15a306be596b033fc21141b52118537d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main file of the Weather Station v3 project. </p>
<dl class="section author"><dt>Author</dt><dd>Josep Dols (<a href="#" onclick="location.href='mai'+'lto:'+'jod'+'ol'+'dar'+'@g'+'mai'+'l.'+'com'; return false;">jodol<span style="display: none;">.nosp@m.</span>dar@<span style="display: none;">.nosp@m.</span>gmail<span style="display: none;">.nosp@m.</span>.com</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2019-08-05</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2019</dd></dl>
<p>Central file of the Weather Station v3 project. From the <a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title="Main function from where the different calls to the modules are done and coordinated to obtain the da...">main()</a> function, the data retrieval process is called. After that, a new <a class="el" href="class_observation.html" title="Observation Class.">Observation</a> object is created and filled with all the information available.</p>
<p>TODO:</p><ul>
<li>Daemonize the execution in order to keep the program executed while the Raspberry Pi is on.</li>
<li>Integrate the WeatherUndergroun API call from the previous Weather Station v2 project.</li>
<li>Implement the DB call in order to save the retrieved data. </li>
</ul>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function from where the different calls to the modules are done and coordinated to obtain the data, process it, and send it to the outside. </p>
<dl class="section return"><dt>Returns</dt><dd>int Result of the program execution </dd></dl>

</div>
</div>
<a id="a15a306be596b033fc21141b52118537d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15a306be596b033fc21141b52118537d">&#9670;&nbsp;</a></span>obtain_usb_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">short int obtain_usb_data </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>receive_buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to obtain the info from the USB device. </p>
<p>Through this function, via the libusb, a dump signal is sent to the specified USB device. After that, the USB device returns a message with the information related to the Weather Station, coded into an array of unsigned chars.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">receive_buffer</td><td>Buffer where the retreived information is stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>short int Result of the execution of the function. </dd></dl>

</div>
</div>
<a id="a3bffa26657f61f8155f2ebf41a1e434d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bffa26657f61f8155f2ebf41a1e434d">&#9670;&nbsp;</a></span>printdev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printdev </td>
          <td>(</td>
          <td class="paramtype">libusb_device *&#160;</td>
          <td class="paramname"><em>dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>From a USB device, it shows its information. </p>
<p>Given a USB device, this function obtains all the available info from it, and shows it via the standard console output. Apart from that, it iterates over all the available interfaces of the device, showing also their information in the console.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Device from where to obtain the information </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="main_8cpp.html">main.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
